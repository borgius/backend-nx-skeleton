import { Global, Module } from '@nestjs/common'

import { MessageQueueEnum } from './microservice-provider.constants'
import { MicroserviceProviderService } from './microservice-provider.service'
import { provideMessageQueueClient } from './utils/microservice-client.util'

@Global()
@Module({
  providers: [
    MicroserviceProviderService,
    ...provideMessageQueueClient([ {% for microservice in microservices %}MessageQueueEnum.{{ microservice.names.queue }}, {% endfor %}])
   ],
  exports: [ MicroserviceProviderService ]
})
export class MicroserviceProviderModule {}
